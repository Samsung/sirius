<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body><h1 id="Movealldiagramelementsatthetopleftorigin">Move all diagram elements at the top-left origin</h1><h2 id="Preamble">Preamble</h2><p><em>Summary</em>: Addition of an action that resets the diagram top-left origin.</p><table><tr><th>Version </th><th>Status </th><th>Date        </th><th>Authors </th><th>Changes </th></tr><tr><td>v0.1        </td><td>DRAFT    </td><td>2014-09-19 </td><td>fbarbin    </td><td>Initial version. </td></tr><tr><td>v0.2        </td><td>DRAFT    </td><td>2014-09-24 </td><td>fbarbin    </td><td>Update after team review. </td></tr><tr><td>v0.3        </td><td>DRAFT    </td><td>2014-09-26 </td><td>fbarbin    </td><td>Update after team review. </td></tr><tr><td>v0.4        </td><td>PROPOSAL    </td><td>2014-09-26 </td><td>fbarbin    </td><td>Update after team review. </td></tr></table><p><em>Relevant tickets</em>:</p><ul><li><a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=444569">444569 &#8211; Move all diagram elements at the top-left origin</a></li></ul><h2 id="Introduction">Introduction</h2><p>The diagram bounds (the rectangle formed by the highest &amp; leftmost and the lowest &amp; rightest elements) can have a negative origin or can be shifted toward the bottom-right with a blank zone at the top-left.<br/>This enhancement aims to add an action that will move all diagram elements so that the diagram retrieves its origin while keeping the element layout.</p><h2 id="DetailedSpecification">Detailed Specification</h2><ul><li>All top level shapes will be considered to determine the diagram bounds. That includes edges but also border nodes that get over the container bounds and labels.</li><li>A <strong>20 pixels margin</strong> between shapes and editor edges will be applied to have a comfortable visibility.</li><li>We will consider only visible elements to compute the shift delta. Masked elements will be moved as the others but not taken in account to determine the new origin. That means if a masked element with a negative location is revealed, the user will have to perform this action again. We explain this choice by the fact we could have a blank space between the diagram origin and the first visible element if a masked element is located between them.</li><li>This action will be available only on diagrams in this particular case.</li><li>A new action named <strong>"Reset Origin"</strong> will be available in the diagram context menu with the shortcut <strong>&#8220;M1&#8221;+"&amp;"</strong>.</li></ul><h3 id="Example">Example:</h3><p>This is an example of a diagram with a blank zone between the origin location and the figures bounds:<br/><img border="0" src="images/before.png"/></p><p>After applying the action, the diagram figures are moved toward the top-left origin location:<br/><img border="0" src="images/after.png"/></p><h2 id="BackwardCompatibilityandMigrationPaths">Backward Compatibility and Migration Paths</h2><p>This evolution does not change any API.</p><h3 id="UserInterfaceChanges">User Interface Changes</h3><ul><li>A new action within the diagram pop-up menu will be added as described within the <em>Detailed Specification</em> section.</li></ul><h3 id="DocumentationChanges">Documentation Changes</h3><p>This new feature should be added in the New and Noteworthy documentation. <br/>A note should also be added in the user doc to explain this new feature.</p><h2 id="TestsandNonregressionstrategy">Tests and Non-regression strategy</h2><p>Add a Junit test that checks that each element is shifted as expected after applying the action.</p><ul><li>Open a diagram and launch the action. Test all top level visible elements location.</li></ul><h2 id="Implementationchoicesandtradeoffs">Implementation choices and tradeoffs</h2></body></html>